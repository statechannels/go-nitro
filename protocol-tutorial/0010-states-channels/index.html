
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>States & Channels - Nitro State Channel Framework</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="statechannels.org" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#states-channels" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Nitro State Channel Framework" class="md-header__button md-logo" aria-label="Nitro State Channel Framework" data-md-component="logo">
      
  <img src="../../assets/mstile-144x144.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nitro State Channel Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              States & Channels
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/statechannels/go-nitro" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Nitro Channels
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../faqs/" class="md-tabs__link">
      FAQs
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../research-papers/" class="md-tabs__link">
      Research papers
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../applications/0010-filecoin/" class="md-tabs__link">
        Applications
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        Protocol tutorial
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Nitro State Channel Framework" class="md-nav__button md-logo" aria-label="Nitro State Channel Framework" data-md-component="logo">
      
  <img src="../../assets/mstile-144x144.png" alt="logo">

    </a>
    Nitro State Channel Framework
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/statechannels/go-nitro" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Nitro Channels
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faqs/" class="md-nav__link">
        FAQs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../research-papers/" class="md-nav__link">
        Research papers
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Applications" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/0010-filecoin/" class="md-nav__link">
        Filecoin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/0020-web3torrent/" class="md-nav__link">
        Web3Torrent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/0030-others/" class="md-nav__link">
        Others
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Protocol tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Protocol tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Protocol tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          States & Channels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        States & Channels
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-part" class="md-nav__link">
    Fixed Part
  </a>
  
    <nav class="md-nav" aria-label="Fixed Part">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chain-id" class="md-nav__link">
    Chain id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#participants" class="md-nav__link">
    Participants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelnonce" class="md-nav__link">
    ChannelNonce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appdefinition" class="md-nav__link">
    AppDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challengeduration" class="md-nav__link">
    ChallengeDuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-part" class="md-nav__link">
    Variable Part
  </a>
  
    <nav class="md-nav" aria-label="Variable Part">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outcome" class="md-nav__link">
    Outcome
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appdata" class="md-nav__link">
    AppData
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turnnum" class="md-nav__link">
    TurnNum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isfinal" class="md-nav__link">
    IsFinal
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#channel-ids" class="md-nav__link">
    Channel IDs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-commitments" class="md-nav__link">
    State commitments
  </a>
  
    <nav class="md-nav" aria-label="State commitments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signedvariableparts" class="md-nav__link">
    SignedVariableParts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#support-proofs" class="md-nav__link">
    Support proofs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recoveredvariableparts" class="md-nav__link">
    RecoveredVariableParts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0020-execution-rules/" class="md-nav__link">
        Execution Rules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0030-outcomes/" class="md-nav__link">
        Outcomes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0040-lifecycle-of-a-channel/" class="md-nav__link">
        Lifecycle of a state channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0050-precautions-and-limits/" class="md-nav__link">
        Precautions and Limits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0060-funding-a-channel/" class="md-nav__link">
        Funding a channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0070-finalizing-a-channel/" class="md-nav__link">
        Finalizing a channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0080-defunding-a-channel/" class="md-nav__link">
        Defunding a channel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-part" class="md-nav__link">
    Fixed Part
  </a>
  
    <nav class="md-nav" aria-label="Fixed Part">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chain-id" class="md-nav__link">
    Chain id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#participants" class="md-nav__link">
    Participants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelnonce" class="md-nav__link">
    ChannelNonce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appdefinition" class="md-nav__link">
    AppDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challengeduration" class="md-nav__link">
    ChallengeDuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-part" class="md-nav__link">
    Variable Part
  </a>
  
    <nav class="md-nav" aria-label="Variable Part">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outcome" class="md-nav__link">
    Outcome
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appdata" class="md-nav__link">
    AppData
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turnnum" class="md-nav__link">
    TurnNum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isfinal" class="md-nav__link">
    IsFinal
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#channel-ids" class="md-nav__link">
    Channel IDs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-commitments" class="md-nav__link">
    State commitments
  </a>
  
    <nav class="md-nav" aria-label="State commitments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signedvariableparts" class="md-nav__link">
    SignedVariableParts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#support-proofs" class="md-nav__link">
    Support proofs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recoveredvariableparts" class="md-nav__link">
    RecoveredVariableParts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/statechannels/go-nitro/edit/master/docs/protocol-tutorial/0010-states-channels.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="states-channels">States &amp; Channels</h1>
<p>A state channel can be thought of as a set of data structures (called "states") committed to and exchanged between a fixed set of actors (which we call participants), together with some execution rules.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In Nitro, participants "commit to" a state by digitially signing it.</p>
</div>
<p>A state channel controls <a href="../0060-funding-a-channel/">funds</a> which are locked up -- either on an L1 blockchain or on some other ledger such as another state channel.</p>
<p>State channel execution may always be disputed on-chain via a contract we call the Adjudicator, although this not necessary.</p>
<h2 id="states">States</h2>
<p>In Nitro protocol, a state is broken up into fixed and variable parts:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Solidity</label><label for="__tabbed_1_2">TypeScript</label><label for="__tabbed_1_3">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kt">import</span><span class="w"> </span><span class="p">{</span>ExitFormat<span class="w"> </span>as<span class="w"> </span>Outcome<span class="p">}</span><span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;@statechannels/exit-format/contracts/ExitFormat.sol&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kt">struct</span><span class="w"> </span><span class="nv">FixedPart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">chainId</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="kt">address</span><span class="p">[]</span><span class="w"> </span>participants<span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="kt">uint48</span><span class="w"> </span><span class="nv">channelNonce</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">appDefinition</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="kt">uint48</span><span class="w"> </span><span class="nv">challengeDuration</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="kt">struct</span><span class="w"> </span><span class="nv">VariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span>Outcome<span class="p">.</span>SingleAssetExit<span class="p">[]</span><span class="w"> </span>outcome<span class="p">;</span><span class="w"> </span><span class="c1">// (1)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">appData</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="kt">uint48</span><span class="w"> </span><span class="nv">turnNum</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nv">isFinal</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>This composite type is explained in the section on <a href="../0030-outcomes/">outcomes</a>.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">ExitFormat</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@statechannels/exit-format&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="c1">// (1)</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Address</span><span class="p">,</span><span class="w"> </span><span class="nx">Bytes</span><span class="p">,</span><span class="w"> </span><span class="nx">Bytes32</span><span class="p">,</span><span class="w"> </span><span class="nx">Uint256</span><span class="p">,</span><span class="w"> </span><span class="nx">Uint48</span><span class="p">,</span><span class="w"> </span><span class="nx">Uint64</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@statechannels/nitro-protocol&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">FixedPart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">        </span><span class="nx">chainId</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint256</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="nx">participants</span><span class="o">:</span><span class="w"> </span><span class="kt">Address</span><span class="p">[];</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="nx">channelNonce</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint64</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="nx">appDefinition</span><span class="o">:</span><span class="w"> </span><span class="kt">Address</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">        </span><span class="nx">challengeDuration</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint48</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">VariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="nx">outcome</span><span class="o">:</span><span class="w"> </span><span class="kt">ExitFormat.Exit</span><span class="p">;</span><span class="w"> </span><span class="c1">// (2)</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="nx">appData</span><span class="o">:</span><span class="w"> </span><span class="kt">Bytes</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">        </span><span class="nx">turnNum</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint48</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="nx">isFinal</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li><code>Bytes32</code>, <code>Bytes</code>, <code>Address</code>, <code>Uint256</code>, <code>Uint64</code> are aliases to the Javascript <code>string</code> type. They are respresented as hex strings. <code>Uint48</code> is aliased to a <code>number</code>.</li>
<li>This composite type is explained in the section on <a href="../0030-outcomes/">outcomes</a>.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="s">&quot;github.com/statechannels/go-nitro/channel/state/outcome&quot;</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="s">&quot;github.com/statechannels/go-nitro/types&quot;</span><span class="w"> </span><span class="c1">// (1)</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">)</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kd">type</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="nx">FixedPart</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="nx">ChainId</span><span class="w">           </span><span class="o">*</span><span class="nx">types</span><span class="p">.</span><span class="nx">Uint256</span><span class="w"></span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">        </span><span class="nx">Participants</span><span class="w">      </span><span class="p">[]</span><span class="nx">types</span><span class="p">.</span><span class="nx">Address</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="nx">ChannelNonce</span><span class="w">      </span><span class="kt">uint64</span><span class="w"></span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="nx">AppDefinition</span><span class="w">     </span><span class="nx">types</span><span class="p">.</span><span class="nx">Address</span><span class="w"></span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="nx">ChallengeDuration</span><span class="w"> </span><span class="kt">uint32</span><span class="w"></span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="nx">VariablePart</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">        </span><span class="nx">AppData</span><span class="w"> </span><span class="nx">types</span><span class="p">.</span><span class="nx">Bytes</span><span class="w"></span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">        </span><span class="nx">Outcome</span><span class="w"> </span><span class="nx">outcome</span><span class="p">.</span><span class="nx">Exit</span><span class="w"> </span><span class="c1">// (2)</span><span class="w"></span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">        </span><span class="nx">TurnNum</span><span class="w"> </span><span class="kt">uint64</span><span class="w"></span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">        </span><span class="nx">IsFinal</span><span class="w"> </span><span class="kt">bool</span><span class="w"></span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="p">)</span><span class="w"></span>
</code></pre></div>
<ol>
<li><code>types.Address</code> is an alias to go-ethereum's <a href="https://pkg.go.dev/github.com/ethereum/go-ethereum@v1.10.8/common#Address"><code>common.Address</code></a> type. <code>types.Bytes32</code> is an alias to go-ethereum's <a href="https://pkg.go.dev/github.com/ethereum/go-ethereum@v1.10.8/common#Hash"><code>common.Hash</code></a> type.</li>
<li>This composite type is explained in the section on <a href="../0030-outcomes/">outcomes</a>.</li>
</ol>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>States are usually submitted to the blockchain as a single fixed part and multiple (signed) variable parts. This is known as a <a href="#support-proofs">"support proof"</a>.</p>
</div>
<p>Let's take each property in turn:</p>
<h2 id="fixed-part">Fixed Part</h2>
<h3 id="chain-id">Chain id</h3>
<p>This needs to match the id of the chain where assets are to be locked (i.e. the 'root' of the funding graph for this channel). In the event of a mismatch, the channel cannot be concluded and funds cannot be unlocked.</p>
<h3 id="participants">Participants</h3>
<p>This is a list of Ethereum addresses, each derived from an ECDSA private key in the usual manner. Each address represents a participant in the state channel who is able to commit to state updates and thereby cause the channel to finalize on chain.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before joining a state channel, you (or your off-chain software) should check that it has length at least 2, but no more than 255, and include a public key (account) that you control. Each entry should be a nonzero ethereum address.</p>
</div>
<h3 id="channelnonce">ChannelNonce</h3>
<p>This is a unique number used to differentiate channels with an otherwise identical <code>FixedPart</code>. For example, if the same participants want to run the same kind of channel on the same chain as a previous channel, they can choose a new <code>ChannelNonce</code> to prevent state updates for the original channel from being replayed on the new one.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should never join a channel which re-uses a channel nonce.</p>
</div>
<h3 id="appdefinition">AppDefinition</h3>
<p>This is an Ethereum address where a Nitro application has been deployed. This is a contract conforming to the <code>ForceMoveApp</code> and defining <a href="../0020-execution-rules/#application-rules">application rules</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should have confidence that the application is not malicious or suffering from security flaws. You should inspect the source code (which should be publically available and verifiable) or appeal to a trusted authority to do this.</p>
</div>
<h3 id="challengeduration">ChallengeDuration</h3>
<p>This is duration (in seconds) of the challenge-response window. If a challenge is raised on chain at time <code>t</code>, the channel will finalize at <code>t + ChallengeDuration</code> unless cleared by a subqsequent on-chain transaction.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This should be at least 1 block time (~15 seconds on mainnet) and less than <code>2^48-1</code> seconds. Whatever it is set to, the channel should be closed long before <code>2^48 - 1 - challengeDuration</code>. In practice we recommend somewhere between 5 minutes and 5 months.</p>
</div>
<h2 id="variable-part">Variable Part</h2>
<h3 id="outcome">Outcome</h3>
<p>This describes how funds will be disbursed if the channel were to finalize in the current state. See the section on <a href="../0030-outcomes/">Outcomes</a>.</p>
<h3 id="appdata">AppData</h3>
<p>The AppData is optional data which may be interpreted by the Nitro application and affect the execution rules of the channel -- see the section on <a href="../0020-execution-rules/#application-rules">application rules</a>. For example, it could describe the state of a chess board or include the hash of a secret.</p>
<h3 id="turnnum">TurnNum</h3>
<p>The turn number is the mechanism by which newer states take precedence over older ones. The turn number usually increments as the channel progresses.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The turn number must not exceed 281,474,976,710,655 because then it will overflow on chain. It should not exceed 4,294,967,295 because it may then overflow off-chain. It is very unlikely a channel would ever have this many updates.</p>
</div>
<h3 id="isfinal">IsFinal</h3>
<p>This is a boolean flag which allows the <a href="#execution-rules">channel execution rules</a> to be bypassed and for the channel to be finalized "instantly" without waiting for the challenge-response window to lapse.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As soon as an <code>isFinal=true</code> state is <em>enabled</em> (that is to say, you cannot prevent it from becoming supported) it is not safe to continue executing the state channel. It should be finalized immediately.</p>
</div>
<h2 id="channel-ids">Channel IDs</h2>
<p>Channels are identified by the hash of the <code>FixedPart</code> of the state (those parts that may <em>not</em> vary):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="w">  </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">channelId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">keccak256</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">      </span>abi<span class="p">.</span>encode<span class="p">(</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">          </span>fixedPart<span class="p">.</span>chainId<span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">          </span>fixedPart<span class="p">.</span>participants<span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">          </span>fixedPart<span class="p">.</span>channelNonce<span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">          </span>fixedPart<span class="p">.</span>appDefinition<span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">          </span>fixedPart<span class="p">.</span>challengeDuration<span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">      </span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">  </span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h2 id="state-commitments">State commitments</h2>
<p>To commit to a state, a hash is formed as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w"> </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">stateHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">keccak256</span><span class="p">(</span>abi<span class="p">.</span>encode<span class="p">(</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">        </span>channelId<span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span>variablePart<span class="p">.</span>appData<span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span>variablePart<span class="p">.</span>outcome<span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span>variablePart<span class="p">.</span>turnNum<span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span>variablePart<span class="p">.</span>isFinal<span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="p">));</span><span class="w"></span>
</code></pre></div>
<p>and this hash is signed using an dedicated Ethereum private key generated solely for the purpose of executing state channel(s) and not otherwise controlling funds on chain. The signature has the following type:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Solidity</label><label for="__tabbed_2_2">TypeScript</label><label for="__tabbed_2_3">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Signature</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">        </span><span class="kt">uint8</span><span class="w"> </span><span class="nv">v</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">r</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">s</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Signature</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;ethers&quot;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="w">    </span><span class="kd">type</span><span class="w"> </span><span class="nx">Signature</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">        </span><span class="nx">R</span><span class="w"> </span><span class="p">[]</span><span class="kt">byte</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">        </span><span class="nx">S</span><span class="w"> </span><span class="p">[]</span><span class="kt">byte</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">        </span><span class="nx">V</span><span class="w"> </span><span class="kt">byte</span><span class="w"></span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>You can sign a state using these utilities:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">TypeScript</label><label for="__tabbed_3_2">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">signData</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="err">&#39;</span><span class="kd">@statechannels</span><span class="o">/</span><span class="nx">nitro</span><span class="o">-</span><span class="nx">protocol</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">signData</span><span class="p">(</span><span class="nx">stateHash</span><span class="p">,</span><span class="w"> </span><span class="nx">privateKey</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">import</span><span class="w">  </span><span class="nx">nc</span><span class="w"> </span><span class="s">&quot;github.com/statechannels/go-nitro/crypto&quot;</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nx">signature</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">nc</span><span class="p">.</span><span class="nx">SignEthereumMessage</span><span class="p">(</span><span class="nx">stateHash</span><span class="p">.</span><span class="nx">Bytes</span><span class="p">(),</span><span class="w"> </span><span class="nx">secretKey</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="signedvariableparts"><code>SignedVariableParts</code></h3>
<p>Signatures on a state hash by different participants are often bundled up with the variable part of the state when being submitted to chain.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Solidity</label><label for="__tabbed_4_2">TypeScript</label><label for="__tabbed_4_3">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kt">struct</span><span class="w"> </span><span class="nv">SignedVariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span>VariablePart<span class="w"> </span>variablePart<span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span>Signature<span class="p">[]</span><span class="w"> </span>sigs<span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">SignedVariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="nx">variablePart</span><span class="o">:</span><span class="w"> </span><span class="kt">VariablePart</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="nx">sigs</span><span class="o">:</span><span class="w"> </span><span class="kt">Signature</span><span class="p">[];</span><span class="w"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">    </span><span class="c1">// INitroTypesSignedVariablePart is an auto generated low-level Go binding around an user-defined struct.</span><span class="w"></span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="kd">type</span><span class="w"> </span><span class="nx">INitroTypesSignedVariablePart</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">        </span><span class="nx">VariablePart</span><span class="w"> </span><span class="nx">INitroTypesVariablePart</span><span class="w"></span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">        </span><span class="nx">Sigs</span><span class="w">         </span><span class="p">[]</span><span class="nx">INitroTypesSignature</span><span class="w"></span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="support-proofs">Support proofs</h3>
<p>A support proof is any bundle of information sufficient for the chain to verify that a given channel state is legitimate. They usually consist of <a href="#states"><code>FixedPart</code></a>, plus a singular <a href="#signedvariableparts"><code>SignedVariablePart</code></a> named <code>candidate</code>, plus an array of <a href="#signedvariableparts"><code>SignedVariableParts</code></a> named <code>proof</code>.</p>
<p>The trivial support proof is a state with <code>IsFinal: true</code> signed by every participant. For an intuition around more complicated support proofs, see <a href="https://blog.statechannels.org/putting-the-state-in-state-channels/">Putting the 'state' in state channels</a>.</p>
<h3 id="recoveredvariableparts"><code>RecoveredVariableParts</code></h3>
<p>The adjudicator smart contract will recover the signer from each signature on a <code>SignedVariablePart</code>, and convert the resulting list into a <code>signedBy</code> bitmask indicating which participant has signed that particular state. The bitfield is bundled with the <code>VariablePart</code> into a <code>RecoveredVariablePart</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Solidity</label><label for="__tabbed_5_2">TypeScript</label><label for="__tabbed_5_3">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kt">struct</span><span class="w"> </span><span class="nv">RecoveredVariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span>VariablePart<span class="w"> </span>variablePart<span class="p">;</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">signedBy</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">RecoveredVariablePart</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="nx">variablePart</span><span class="o">:</span><span class="w"> </span><span class="kt">VariablePart</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="nx">signedBy</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint256</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">    </span><span class="c1">// not yet implemented</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>before being passed to the application execution rules (which do not need to do any signature recovery of their own).</p>
<p>For example, if a channel has three participants and they all signed the state in question, we would have <code>signedBy = 0b111 = 7</code>. If only participant with index <code>0</code> had signed, we would have <code>signedBy = 0b001 = 1</code>.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../applications/0030-others/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Others" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Others
            </div>
          </div>
        </a>
      
      
        
        <a href="../0020-execution-rules/" class="md-footer__link md-footer__link--next" aria-label="Next: Execution Rules" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Execution Rules
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.tracking", "navigation.tabs", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>